<!DOCTYPE html>
<html>
<head>
    <title>Grade Calculator Using Provided Formula</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f7f7f7;
            color: #333;
            background-color: black;
        }
        .container {
            max-width: 400px;
            background: white;
            padding: 20px;
            margin: 50px auto;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        input, button {
            width: 100%;
            padding: 10px;
            margin-top: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        button {
            background: #5cb85c;
            color: white;
            border: 0;
        }
        button:hover {
            background: #4cae4c;
        }
        #result, #explanation {
            margin-top: 20px;
            padding: 10px;
            background: #dff0d8;
            border: 1px solid #d6e9c6;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <label for="currentOverallGrade">Current Overall Grade (%)</label>
        <input type="number" id="currentOverallGrade" placeholder="Enter current overall grade">

        <label for="categoryWeight">Category Weight in Overall Grade (%)</label>
        <input type="number" id="categoryWeight" placeholder="Enter category weight">

        <label for="currentCategoryGrade">Current Category Grade (%)</label>
        <input type="number" id="currentCategoryGrade" placeholder="Enter current category grade">

        <label for="assignmentWeightWithinCategory">Assignment Weight Within Category (%)</label>
        <input type="number" id="assignmentWeightWithinCategory" placeholder="Enter assignment weight within category">

        <label for="desiredGrade">Desired Overall Grade (%)</label>
        <input type="number" id="desiredGrade" placeholder="Enter desired overall grade">

        <button onclick="calculateGrade()">Calculate</button>

        <div id="result"></div>
        <div id="explanation" style="font-size: 0.9em;"></div>
    </div>

    <script>
        function calculateGrade() {
            let C = parseFloat(document.getElementById('currentOverallGrade').value);
            let w = parseFloat(document.getElementById('categoryWeight').value) / 100;
            let C_prime = parseFloat(document.getElementById('currentCategoryGrade').value);
            let w_prime = parseFloat(document.getElementById('assignmentWeightWithinCategory').value) / 100;
            let G = parseFloat(document.getElementById('desiredGrade').value);

            let F = (G - (1 - w) * C - w * C_prime * (1 - w_prime)) / (w * w_prime);

            let explanationText = "";

            if (!isNaN(F)) {
                document.getElementById('result').innerText = 'You need to score: ' + F.toFixed(2) + '% on the new assignment';
                
                explanationText = "Calculation Explanation:\n" +
                "1. We start with your desired overall grade (G).\n" +
                "2. Then we subtract the portion of your current overall grade (C) not affected by the category weight (1 - w).\n" +
                "3. We also subtract the impact of your current category grade (C') modified by the remaining category weight after the new assignment (1 - w').\n" +
                "4. We divide this result by the combined impact of the category and the new assignment weight (w * w').\n" +
                "5. This gives us the grade you need on the new assignment (F).";

            }else {
                document.getElementById('result').innerText = 'Please enter valid numbers';
                explanationText = "Make sure all inputs are entered correctly and are numerical values.";
            }


            document.getElementById('explanation').innerText=explanationText;
        }
    </script>
</body>
</html>
